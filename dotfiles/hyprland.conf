#
# Optimal resolution and scaling for known monitors,
# sane defaults for unknown monitors.
#

$internalMonitor = eDP-1
$externalMonitor = desc:Advanced Micro Peripherals Ltd ES07D03 EVE222500661

monitor=$internalMonitor, 2880x1920@120,  0x0,        2
monitor=$externalMonitor, 3840x2160@144,  auto-right, 1.5
monitor=,                 preferred,      auto,       auto

#
# 10 persistent workspaces distributed across two monitors + scratchpad
#
# While dynamic workspaces works pretty well for single monitor setups,
# I didn't find it to be a good fit for my dual monitor setup.
#

workspace = 1, persistent:true, monitor:$internalMonitor, default:true
workspace = 2, persistent:true, monitor:$internalMonitor
workspace = 3, persistent:true, monitor:$internalMonitor
workspace = 4, persistent:true, monitor:$internalMonitor
workspace = 5, persistent:true, monitor:$internalMonitor

workspace = 6,  persistent:true, monitor:$externalMonitor, default:true
workspace = 7,  persistent:true, monitor:$externalMonitor
workspace = 8,  persistent:true, monitor:$externalMonitor
workspace = 9,  persistent:true, monitor:$externalMonitor
workspace = 10, persistent:true, monitor:$externalMonitor

# Navigation to adjacent workspaces
# (MacOS-like keybinding)
bind = CTRL,  right,      workspace, e+1
bind = CTRL,  left,       workspace, e-1
# HJKL-style
bind = CTRL,  l,          workspace, e+1
bind = CTRL,  h,          workspace, e-1
# using mouse wheel
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up,   workspace, e-1
# using touchpad 3-fingers swipe gesture
gestures {
  workspace_swipe = true
}

# Switch workspaces by number
# (It works especially well with persistent workspaces
# and having a workspace number and app icon on the bar)
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move active window to a workspace
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

#
# Apps and Special Workspaces
#

$terminal        = kitty
$mailClient      = proton-mail
$passwordManager = proton-pass
$appLauncher     = walker
$fileManager     = kitty -e yazi

workspace = s[true], gapsout:20

workspace = special:terminal, on-created-empty:$terminal
bind = SUPER CONTROL, SPACE, togglespecialworkspace, terminal

workspace = special:mail, on-created-empty:$mailClient
bind = SUPER CONTROL, M, togglespecialworkspace, mail

workspace = special:telegram, on-created-empty:Telegram
bind = SUPER CONTROL, T, togglespecialworkspace, telegram

workspace = special:passwordManager, on-created-empty:$passwordManager
bind = SUPER CONTROL, P, togglespecialworkspace, passwordManager

workspace = special:anytype, on-created-empty:anytype
bind = SUPER CONTROL, A, togglespecialworkspace, anytype

# "Scratchpad" workspace
bind = SUPER, S, togglespecialworkspace, magic
bind = SUPER SHIFT, S, movetoworkspace, special:magic

# starting terminal should be super accessible
bind = SUPER, T, exec, $terminal
bind = SUPER, E, exec, $fileManager

# Application Launcher
bind = LEFT_ALT, SPACE, exec, $appLauncher

#
# Window Control
#

bind = SUPER, Q, forcekillactive, # like MasOS's Cmd+Q
bind = SUPER, W, killactive,      # like MasOS's Cmd+W, but always closes the window, not a tab

bind = SUPER, H, movefocus, l
bind = SUPER, L, movefocus, r
bind = SUPER, K, movefocus, u
bind = SUPER, J, movefocus, d

bind = SUPER,       F, fullscreen,     0
bind = SUPER_SHIFT, f, togglefloating,

# Move/resize windows with SUPER + LMB/RMB and dragging
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

#
# Window Rules
#
windowrule = float,        title:Proton VPN
windowrule = size 25% 60%, title:Proton VPN

#
# Hyprland Controls
#
bind = SUPER SHIFT, Q, exec, uwsm stop

#
# Universal copy-paste
#
bind = SUPER, C, sendshortcut, CTRL_SHIFT, C, active, class:^(kitty)$
bind = SUPER, C, sendshortcut, CTRL, C

bind = SUPER, V, sendshortcut, CTRL_SHIFT, V, active, class:^(kitty)$
bind = SUPER, V, sendshortcut, CTRL, V

#
# Permissions
#

# See https://wiki.hypr.land/Configuring/Permissions/

ecosystem {
  enforce_permissions = 1
}

# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow

#
# Look & Feel
#

general {
  layout = dwindle

  gaps_in = 4
  gaps_out = 6

  col.active_border = rgb(ebdbb2) rgb(d65d0e) 60deg
  col.inactive_border = rgb(272727)
  border_size = 1

  # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
  allow_tearing = false
}

decoration {
  rounding = 4

  blur {
    enabled = yes
    special = true
    size = 3
    passes = 1
  }
}

animations {
  enabled = yes

  bezier = myBezier, 0.05, 0.9, 0.15, 1.03

  animation = windows, 1, 6, myBezier, popin

  animation = workspaces,       1, 3, default
  animation = specialWorkspace, 1, 3, default, fade
}

dwindle {
  pseudotile = true # Master switch for pseudotiling.
  preserve_split = true # You probably want this
}
# bind = SUPER, P, pseudo, # dwindle
# bind = SUPER, J, togglesplit, # dwindle

master {
  new_status = master
}

#
# Keyboard, mouse & touchpad inputs
#

input {
  kb_layout = us,ru

  follow_mouse = 1

  sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

  touchpad {
    natural_scroll = true
    disable_while_typing = true
  }
}

bind = SUPER, SPACE, exec, hyprctl switchxkblayout current next

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume,  exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume,  exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute,         exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute,      exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp,   exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# Requires playerctl
bindl = , XF86AudioNext,  exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay,  exec, playerctl play-pause
bindl = , XF86AudioPrev,  exec, playerctl previous

#
# Small Fixups
#

misc {
  force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
  disable_hyprland_logo = true # If true disables the random hyprland logo / anime girl background. :(
}

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*
# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
